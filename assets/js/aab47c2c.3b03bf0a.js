(self.webpackChunkwebsite_2=self.webpackChunkwebsite_2||[]).push([[8872],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return u},kt:function(){return c}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=s(a),c=r,g=d["".concat(p,".").concat(c)]||d[c]||m[c]||l;return a?n.createElement(g,i(i({ref:t},u),{},{components:a})):n.createElement(g,i({ref:t},u))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=d;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var s=2;s<l;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},1940:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return i},contentTitle:function(){return o},metadata:function(){return p},toc:function(){return s},default:function(){return m}});var n=a(2122),r=a(9756),l=(a(7294),a(3905)),i={},o="Smart-seq2 Single Nucleus Multi-Sample Overview",p={unversionedId:"Pipelines/Smart-seq2_Single_Nucleus_Multi_Sample_Pipeline/README",id:"Pipelines/Smart-seq2_Single_Nucleus_Multi_Sample_Pipeline/README",isDocsHomePage:!1,title:"Smart-seq2 Single Nucleus Multi-Sample Overview",description:"| Pipeline Version | Date Updated | Documentation Author | Questions or Feedback |",source:"@site/docs/Pipelines/Smart-seq2_Single_Nucleus_Multi_Sample_Pipeline/README.md",sourceDirName:"Pipelines/Smart-seq2_Single_Nucleus_Multi_Sample_Pipeline",slug:"/Pipelines/Smart-seq2_Single_Nucleus_Multi_Sample_Pipeline/README",permalink:"/warp/docs/Pipelines/Smart-seq2_Single_Nucleus_Multi_Sample_Pipeline/README",editUrl:"https://github.com/broadinstitute/warp/edit/develop/website/docs/Pipelines/Smart-seq2_Single_Nucleus_Multi_Sample_Pipeline/README.md",version:"current",lastUpdatedBy:"ekiernan",lastUpdatedAt:1625068711,formattedLastUpdatedAt:"6/30/2021",frontMatter:{},sidebar:"docsSidebar",previous:{title:"What's in the Smart-seq2 Multi Sample Pipeline Loom File?",permalink:"/warp/docs/Pipelines/Smart-seq2_Multi_Sample_Pipeline/Loom_schema"},next:{title:"Smart-seq2 Single Nucleus Overview",permalink:"/warp/docs/Pipelines/Smart-seq2_Single_Nucleus_Pipeline/README"}},s=[{value:"Introduction",id:"introduction",children:[]},{value:"Inputs",id:"inputs",children:[{value:"Sample and Reference Inputs",id:"sample-and-reference-inputs",children:[]},{value:"Smart-seq2 Multi-Sample Task Summary",id:"smart-seq2-multi-sample-task-summary",children:[]},{value:"Outputs",id:"outputs",children:[]}]},{value:"Validation",id:"validation",children:[]},{value:"Versioning",id:"versioning",children:[]},{value:"Consortia Support",id:"consortia-support",children:[]},{value:"Have Suggestions?",id:"have-suggestions",children:[]}],u={toc:s};function m(e){var t=e.components,a=(0,r.Z)(e,["components"]);return(0,l.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"smart-seq2-single-nucleus-multi-sample-overview"},"Smart-seq2 Single Nucleus Multi-Sample Overview"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"center"},"Pipeline Version"),(0,l.kt)("th",{parentName:"tr",align:"center"},"Date Updated"),(0,l.kt)("th",{parentName:"tr",align:"center"},"Documentation Author"),(0,l.kt)("th",{parentName:"tr",align:"center"},"Questions or Feedback"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"center"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/broadinstitute/warp/releases"},"MultiSampleSmartSeq2SingleNuclei_v1.0.0.")),(0,l.kt)("td",{parentName:"tr",align:"center"},"June, 2021"),(0,l.kt)("td",{parentName:"tr",align:"center"},(0,l.kt)("a",{parentName:"td",href:"mailto:ekiernan@broadinstitute.org"},"Elizabeth Kiernan")),(0,l.kt)("td",{parentName:"tr",align:"center"},"Please file GitHub issues in WARP or contact ",(0,l.kt)("a",{parentName:"td",href:"mailto:kdegatano@broadinstitute.org"},"Kylee Degatano"))))),(0,l.kt)("h2",{id:"introduction"},"Introduction"),(0,l.kt)("p",null,"The Smart-seq2 Single Nucleus Multi-Sample (Multi-snSS2) Pipeline is a wrapper around the ",(0,l.kt)("a",{parentName:"p",href:"../Smart-seq2_Single_Nucleus_Pipeline/README"},"Smart-seq2 Single Nucleus")," Pipeline. It is developed in collaboration with the ",(0,l.kt)("a",{parentName:"p",href:"https://biccn.org/"},"BRAIN Initiative Cell Census Network")," (BICCN) to process single-nucleus RNAseq (snRNAseq) data generated by ",(0,l.kt)("a",{parentName:"p",href:"https://www.nature.com/articles/nmeth.2639"},"Smart-seq2 assays"),". The pipeline's workflow is written in WDL, is freely available in the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/broadinstitute/warp/blob/develop/pipelines/skylab/smartseq2_single_nucleus_multisample/MultiSampleSmartSeq2SingleNucleus.wdl"},"WARP repository")," on GitHub, and can be run by any compliant WDL runner (e.g. ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/broadinstitute/cromwell"},"Crowmell"),").  "),(0,l.kt)("p",null,"The workflow processes multiple cells by importing and running the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/broadinstitute/warp/blob/develop/pipelines/skylab/smartseq2_single_nucleus/SmartSeq2SingleNucleus.wdl"},"Smart-seq2 Single Nucleus workflow")," for each cell and then merging the resulting count matrices (Loom format) into a single matrix that includes exonic and intronic counts, as well as quality metrics."),(0,l.kt)("p",null,"Full details about the Smart-seq2 pipeline can be read in the ",(0,l.kt)("a",{parentName:"p",href:"../Smart-seq2_Single_Nucleus_Pipeline/README"},"Smart-seq2 Single Sample Overview")," in WARP documentation."),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Try the Multi-snSS2 workflow in Terra")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"You can run the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/broadinstitute/warp/blob/master/pipelines/skylab/smartseq2_single_nucleus_multisample/MultiSampleSmartSeq2SingleNucleus.wdl"},"Smart-seq2 Single Nucleus Multi-Sample workflow")," in ",(0,l.kt)("a",{parentName:"p",href:"https://app.terra.bio"},"Terra"),", a cloud-based analysis platform. The Terra ",(0,l.kt)("a",{parentName:"p",href:"https://app.terra.bio/#workspaces/warp-pipelines/Smart-seq2_Single_Nucleus_Muti-Sample"},"Smart-seq2 Single Nucleus Multi-Sample public workspace")," is preloaded with the Multi-snSS2 workflow, example testing data, and all the required reference data."))),(0,l.kt)("h2",{id:"inputs"},"Inputs"),(0,l.kt)("p",null,"An ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/broadinstitute/warp/blob/master/pipelines/skylab/smartseq2_single_nucleus_multisample/mouse_example.json"},"example configuration file (JSON)")," is available to test the pipeline."),(0,l.kt)("h3",{id:"sample-and-reference-inputs"},"Sample and Reference Inputs"),(0,l.kt)("p",null,"The workflow sample and reference inputs are identical to those specified in the ",(0,l.kt)("a",{parentName:"p",href:"../Smart-seq2_Single_Nucleus_Pipeline/README"},"Smart-seq2 Single Nucleus Overview")," with the exception of the additional inputs specified in the table below. "),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Input Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Input Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Input Format"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"fastq1_input_files"),(0,l.kt)("td",{parentName:"tr",align:null},"Cloud locations for each read1 file"),(0,l.kt)("td",{parentName:"tr",align:null},"Array of strings")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"fastq2_input_files"),(0,l.kt)("td",{parentName:"tr",align:null},"Cloud locations for each read2 file"),(0,l.kt)("td",{parentName:"tr",align:null},"Array of strings")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"input_ids"),(0,l.kt)("td",{parentName:"tr",align:null},"Unique identifiers or names for each cell; can be a UUID or human-readable name"),(0,l.kt)("td",{parentName:"tr",align:null},"Array of strings")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"input_names"),(0,l.kt)("td",{parentName:"tr",align:null},"Optional unique identifiers/names to further describe each cell. If ",(0,l.kt)("inlineCode",{parentName:"td"},"input_ids")," is a UUID, the ",(0,l.kt)("inlineCode",{parentName:"td"},"input_names")," could be used as a human-readable identifier"),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"batch_id"),(0,l.kt)("td",{parentName:"tr",align:null},"Identifier for the batch of multiple samples"),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"batch_name"),(0,l.kt)("td",{parentName:"tr",align:null},"Optional string to describe the batch or biological sample"),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"input_name_metadata_field"),(0,l.kt)("td",{parentName:"tr",align:null},"Optional input describing, when applicable, the metadata field containing the ",(0,l.kt)("inlineCode",{parentName:"td"},"input_names")),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"input_id_metadata_field"),(0,l.kt)("td",{parentName:"tr",align:null},"Optional string describing, when applicable, the metadata field containing the ",(0,l.kt)("inlineCode",{parentName:"td"},"input_ids")),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"project_id"),(0,l.kt)("td",{parentName:"tr",align:null},"Optional project identifier; usually a number"),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"project_name"),(0,l.kt)("td",{parentName:"tr",align:null},"Optional project identifier; usually a human-readable name"),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"library"),(0,l.kt)("td",{parentName:"tr",align:null},"Optional description of the sequencing method or approach"),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"organ"),(0,l.kt)("td",{parentName:"tr",align:null},"Optional description of the organ from which the cells were derived"),(0,l.kt)("td",{parentName:"tr",align:null},"String")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"species"),(0,l.kt)("td",{parentName:"tr",align:null},"Optional description of the species from which the cells were derived"),(0,l.kt)("td",{parentName:"tr",align:null},"String")))),(0,l.kt)("h3",{id:"smart-seq2-multi-sample-task-summary"},"Smart-seq2 Multi-Sample Task Summary"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Task name and link to WDL"),(0,l.kt)("th",{parentName:"tr",align:null},"Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Software"),(0,l.kt)("th",{parentName:"tr",align:null},"Tools"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://github.com/broadinstitute/warp/blob/develop/tasks/skylab/CheckInputs.wdl"},"CheckInputs.checkInputArrays")),(0,l.kt)("td",{parentName:"tr",align:null},"Checks the inputs and initiates the per cell processing"),(0,l.kt)("td",{parentName:"tr",align:null},"Bash"),(0,l.kt)("td",{parentName:"tr",align:null},"NA")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://github.com/broadinstitute/warp/blob/develop/pipelines/skylab/smartseq2_single_nucleus/SmartSeq2SingleNucleus.wdl"},"single_nucleus_run.SmartSeq2SingleNucleus")),(0,l.kt)("td",{parentName:"tr",align:null},"Calls the Smart-seq2 Single Nucleus workflow to perform alignment, deduplication, quality metric calculating, and exon and intron counting. Produces a final matrix (Loom format) with counts and metrics"),(0,l.kt)("td",{parentName:"tr",align:null},"See the ",(0,l.kt)("a",{parentName:"td",href:"../Smart-seq2_Single_Nucleus_Pipeline/README"},"Smart-seq2 Single Nucleus Overview")," for details about task software"),(0,l.kt)("td",{parentName:"tr",align:null},"See the ",(0,l.kt)("a",{parentName:"td",href:"../Smart-seq2_Single_Nucleus_Pipeline/README"},"Smart-seq2 Single Nucleus Overview")," for details about task tools")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("a",{parentName:"td",href:"https://github.com/broadinstitute/warp/blob/develop/tasks/skylab/LoomUtils.wdl"},"LoomUtils.AggregateSmartSeq2Loom")),(0,l.kt)("td",{parentName:"tr",align:null},"Aggregates the matrix files (Loom format) for each sample to produce one final Loom output"),(0,l.kt)("td",{parentName:"tr",align:null},"Python 3"),(0,l.kt)("td",{parentName:"tr",align:null},"Custom script: ",(0,l.kt)("a",{parentName:"td",href:"https://github.com/broadinstitute/warp/blob/develop/dockers/skylab/loom-output/ss2_loom_merge.py"},"ss2_loom_merge.py"))))),(0,l.kt)("h3",{id:"outputs"},"Outputs"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Output Name"),(0,l.kt)("th",{parentName:"tr",align:null},"Output Description"),(0,l.kt)("th",{parentName:"tr",align:null},"Output Format"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"bam_files"),(0,l.kt)("td",{parentName:"tr",align:null},"Array of genome-aligned BAM files (one for each cell) generated with Star"),(0,l.kt)("td",{parentName:"tr",align:null},"Array ","[BAM]")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"loom_output"),(0,l.kt)("td",{parentName:"tr",align:null},"Cell-by-gene matrix in Loom format containing intronic and exonic counts for every cell"),(0,l.kt)("td",{parentName:"tr",align:null},"File")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"exon_intron_count_files"),(0,l.kt)("td",{parentName:"tr",align:null},"Array of TXT files (one per cell) that contain intronic and exonic counts"),(0,l.kt)("td",{parentName:"tr",align:null},"Array ","[TXT]")))),(0,l.kt)("p",null,"The final count matrix (Loom) is an aggregate of all the individual matrix files generated using the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/broadinstitute/warp/blob/master/pipelines/skylab/smartseq2_single_nucleus/SmartSeq2SingleNucleus.wdl"},"Smart-seq2 Single Nucleus workflow"),". "),(0,l.kt)("p",null,"The aggregated matrix filename contains the ",(0,l.kt)("inlineCode",{parentName:"p"},"batch_id")," prefix, which is the string specified in the input configuration. The ",(0,l.kt)("inlineCode",{parentName:"p"},"batch_id")," is also set as a global attribute in the Loom."),(0,l.kt)("p",null,"The individual sample Loom files are described in the ",(0,l.kt)("a",{parentName:"p",href:"../Smart-seq2_Single_Nucleus_Pipeline/README"},"Smart-seq2 Single Nucleus Overview"),"."),(0,l.kt)("h2",{id:"validation"},"Validation"),(0,l.kt)("p",null,"The Multi-snSS2 pipeline was scientifically validated by the BRAIN Initiatives Cell Census Network (BICCN) 2.0 Whole Mouse Brain Working Group. "),(0,l.kt)("h2",{id:"versioning"},"Versioning"),(0,l.kt)("p",null,"Release information for the Smart-seq2 Single Nucleus Multi-Sample Pipeline can be found in the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/broadinstitute/warp/blob/develop/pipelines/skylab/smartseq2_single_nucleus_multisample/MultiSampleSmartSeq2SingleNucleus.changelog.md"},"changelog"),". Please note that any major changes to the Smart-seq2 Single Nucleus workflow will be documented in the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/broadinstitute/warp/blob/develop/pipelines/skylab/smartseq2_single_nucleus/SmartSeq2SingleNucleus.changelog.md"},"Smart-seq2 Single Nucleus changelog"),"."),(0,l.kt)("h2",{id:"consortia-support"},"Consortia Support"),(0,l.kt)("p",null,"This pipeline is supported and used by the ",(0,l.kt)("a",{parentName:"p",href:"https://biccn.org/"},"BRAIN Initiative Cell Census Network")," (BICCN). "),(0,l.kt)("p",null,"If your organization also uses this pipeline, we would love to list you! Please reach out to us by contacting ",(0,l.kt)("a",{parentName:"p",href:"mailto:kdegatano@broadinstitute.org"},"Kylee Degatano"),"."),(0,l.kt)("h2",{id:"have-suggestions"},"Have Suggestions?"),(0,l.kt)("p",null,"Help us make our tools better by contacting ",(0,l.kt)("a",{parentName:"p",href:"mailto:kdegatano@broadinstitute.org"},"Kylee Degatano")," for pipeline-related suggestions or questions."))}m.isMDXComponent=!0}}]);